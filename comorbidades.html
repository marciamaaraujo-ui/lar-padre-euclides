<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comorbidades - ILPI</title>
<link rel="stylesheet" href="style.css">

<style>
.grupo {
margin-top:30px;
padding:20px;
border:1px solid #e0e0e0;
border-radius:8px;
background:#fafafa;
}

.grupo h3{
margin-bottom:15px;
color:#2c3e50;
border-bottom:2px solid #ddd;
padding-bottom:5px;
}

.checkbox-grid{
display:grid;
grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
gap:8px;
}

.obs-box{
margin-top:30px;
}

textarea{
width:100%;
padding:10px;
margin-top:10px;
min-height:80px;
}

select{
padding:6px;
margin-top:8px;
}

.btn-save{
margin-top:25px;
padding:12px 25px;
font-weight:bold;
}
</style>

</head>

<body onload="carregarResidentes()">

<div class="navbar">
<div class="nav-container">
<img src="assets/logo.png" class="nav-logo">
<div class="nav-links">
<a href="index.html" class="nav-link">üè† Nova Avalia√ß√£o</a>
<a href="dashboard.html" class="nav-link">üìä Dashboard</a>
<a href="ficha-completa.html" class="nav-link">üìÇ Ficha Cl√≠nica</a>
<a href="exames-laboratoriais.html" class="nav-link">üß™ Exames</a>
<a href="comorbidades.html" class="nav-link home-btn">üè• Comorbidades</a>
<a href="metodologia.html" class="nav-link">üìò Metodologia</a>
</div>
</div>
</div>

<div class="container">

<h1>Comorbidades Institucionais</h1>

<select id="selectResidente"></select>

<form id="formComorbidades">

<!-- ================= CARDIOVASCULARES ================= -->
<div class="grupo">
<h3>Doen√ßas Cardiovasculares e Circulat√≥rias</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="Hipertens√£o Arterial (HAS)"> Hipertens√£o Arterial (HAS)</label>
<label><input type="checkbox" value="Dislipidemia"> Dislipidemia</label>
<label><input type="checkbox" value="Insufici√™ncia Venosa"> Insufici√™ncia Venosa</label>
<label><input type="checkbox" value="Arritmia / Fibrila√ß√£o Atrial"> Arritmia / Fibrila√ß√£o Atrial</label>
<label><input type="checkbox" value="Cardiopatia"> Cardiopatia</label>
<label><input type="checkbox" value="Insufici√™ncia Card√≠aca Cr√¥nica (ICC)"> ICC</label>
<label><input type="checkbox" value="Trombose / Tromboembolismo"> Trombose / Tromboembolismo</label>
<label><input type="checkbox" value="Insufici√™ncia Vascular Perif√©rica"> Insufici√™ncia Vascular Perif√©rica</label>
<label><input type="checkbox" value="Aneurisma"> Aneurisma</label>
</div>
</div>

<!-- ================= METAB√ìLICAS ================= -->
<div class="grupo">
<h3>Dist√∫rbios Metab√≥licos e End√≥crinos</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="Diabetes Mellitus Tipo I"> DM Tipo I</label>
<label><input type="checkbox" value="Diabetes Mellitus Tipo II"> DM Tipo II</label>
<label><input type="checkbox" value="Diabetes Insulino-dependente"> Insulino-dependente</label>
<label><input type="checkbox" value="Hipotireoidismo"> Hipotireoidismo</label>
<label><input type="checkbox" value="Obesidade"> Obesidade</label>
<label><input type="checkbox" value="Hiperuricemia"> Hiperuricemia</label>
</div>
</div>

<!-- ================= NEUROL√ìGICAS ================= -->
<div class="grupo">
<h3>Doen√ßas Neurol√≥gicas e Psiqui√°tricas</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="S√≠ndrome Demencial / Alzheimer"> Alzheimer</label>
<label><input type="checkbox" value="Parkinson"> Parkinson</label>
<label><input type="checkbox" value="AVC / AVE"> AVC / AVE</label>
<label><input type="checkbox" value="Depress√£o / TAB"> Depress√£o / TAB</label>
<label><input type="checkbox" value="Ansiedade"> Ansiedade</label>
<label><input type="checkbox" value="Epilepsia"> Epilepsia</label>
<label><input type="checkbox" value="Esquizofrenia"> Esquizofrenia</label>
<label><input type="checkbox" value="Encefalopatia"> Encefalopatia</label>
<label><input type="checkbox" value="Microangiopatia"> Microangiopatia</label>
</div>
</div>

<!-- ================= RESPIRAT√ìRIAS ================= -->
<div class="grupo">
<h3>Doen√ßas Respirat√≥rias</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="DPOC"> DPOC</label>
</div>
</div>

<!-- ================= RENAIS ================= -->
<div class="grupo">
<h3>Doen√ßas Renais e Urin√°rias</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="Doen√ßa Renal Cr√¥nica"> Doen√ßa Renal Cr√¥nica</label>
<label><input type="checkbox" value="HPB"> HPB</label>
<label><input type="checkbox" value="Incontin√™ncia Urin√°ria"> Incontin√™ncia Urin√°ria</label>
<label><input type="checkbox" value="ITU de Repeti√ß√£o"> ITU de Repeti√ß√£o</label>
<label><input type="checkbox" value="Nefrectomia"> Nefrectomia</label>
</div>
</div>

<!-- ================= GASTRO ================= -->
<div class="grupo">
<h3>Doen√ßas Gastrointestinais e Hep√°ticas</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="Gastrite / Refluxo"> Gastrite / Refluxo</label>
<label><input type="checkbox" value="Cirrose / Hepatopatia"> Cirrose / Hepatopatia</label>
<label><input type="checkbox" value="Varizes Esof√°gicas"> Varizes Esof√°gicas</label>
<label><input type="checkbox" value="Constipa√ß√£o"> Constipa√ß√£o</label>
</div>
</div>

<!-- ================= MUSCULO ================= -->
<div class="grupo">
<h3>Musculoesquel√©ticas e Dermatol√≥gicas</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="Osteoporose"> Osteoporose</label>
<label><input type="checkbox" value="Artrite / Artrose"> Artrite / Artrose</label>
<label><input type="checkbox" value="Lombalgia"> Lombalgia</label>
<label><input type="checkbox" value="√ölcera Varicosa"> √ölcera Varicosa</label>
<label><input type="checkbox" value="C√¢ncer de Pele"> C√¢ncer de Pele</label>
<label><input type="checkbox" value="Psor√≠ase"> Psor√≠ase</label>
<label><input type="checkbox" value="Alergia Cut√¢nea"> Alergia Cut√¢nea</label>
</div>
</div>

<!-- ================= OUTROS ================= -->
<div class="grupo">
<h3>Outros e Estilo de Vida</h3>
<div class="checkbox-grid">
<label><input type="checkbox" value="Tabagismo / Etilismo"> Tabagismo / Etilismo</label>
<label><input type="checkbox" value="Anemia Ferropriva"> Anemia Ferropriva</label>
<label><input type="checkbox" value="Amputa√ß√£o / Colostomia"> Amputa√ß√£o / Colostomia</label>
<label><input type="checkbox" value="Doen√ßa de Chagas"> Doen√ßa de Chagas</label>
<label><input type="checkbox" value="Acondroplasia"> Acondroplasia</label>
<label><input type="checkbox" value="S√≠ndrome Mielodispl√°sica"> S√≠ndrome Mielodispl√°sica</label>
<label><input type="checkbox" value="Cirurgia Bari√°trica"> Cirurgia Bari√°trica</label>
</div>
</div>

<!-- ================= CAMPOS MANUAIS ================= -->
<div class="grupo obs-box">
<h3>Observa√ß√µes Cl√≠nicas</h3>

<label>Grau de Controle:</label>
<select id="grauControle">
<option value="">Selecionar</option>
<option>Est√°vel</option>
<option>Descompensado</option>
<option>Em investiga√ß√£o</option>
</select>

<textarea id="obsClinicas" placeholder="Descrever hist√≥rico, intercorr√™ncias, medicamentos, evolu√ß√£o cl√≠nica..."></textarea>

<label>CID (Opcional):</label>
<input type="text" id="cid" placeholder="Ex: I10, E11, G30...">

</div>

<button type="button" class="btn-save" onclick="salvarComorbidades()">üíæ Salvar</button>

</form>
</div>

<script>

function carregarResidentes(){
const banco=JSON.parse(localStorage.getItem("bancoILPI"))||{};
const select=document.getElementById("selectResidente");
select.innerHTML='<option value="">Selecionar residente...</option>';
Object.keys(banco).forEach(nome=>{
select.innerHTML+=`<option value="${nome}">${nome}</option>`;
});
}

function salvarComorbidades(){

const nome=document.getElementById("selectResidente").value;
if(!nome){alert("Selecione um residente.");return;}

const banco=JSON.parse(localStorage.getItem("bancoILPI"))||{};
if(!banco[nome]) banco[nome]={avaliacoes:[],exames:[],comorbidades:[]};

let selecionadas=[];
document.querySelectorAll("input[type='checkbox']:checked")
.forEach(cb=>selecionadas.push(cb.value));

banco[nome].comorbidades=selecionadas;
banco[nome].obsClinicas=document.getElementById("obsClinicas").value;
banco[nome].grauControle=document.getElementById("grauControle").value;
banco[nome].cid=document.getElementById("cid").value;

localStorage.setItem("bancoILPI",JSON.stringify(banco));

alert("Comorbidades atualizadas com sucesso!");
}

</script>

</body>
</html>
