<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exames Laboratoriais - ILPI</title>
<link rel="stylesheet" href="style.css">

<style>
.tabela-exames {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.tabela-exames th,
.tabela-exames td {
    border: 1px solid #e0e0e0;
    padding: 10px;
    font-size: 0.9rem;
}

.tabela-exames th {
    background: #f0f4f2;
    text-align: left;
}

.resultado-alterado {
    background-color: #ffe6e6;
    font-weight: bold;
    color: #c0392b;
}

.resultado-normal {
    background-color: #e8f8f5;
    color: #27ae60;
}
</style>
</head>

<body>

<div class="navbar">
    <div class="nav-container">
        <img src="assets/logo.png" class="nav-logo" alt="Logo ILPI">
        <div class="nav-links">
            <a href="index.html" class="nav-link">ğŸ  Nova AvaliaÃ§Ã£o</a>
            <a href="dashboard.html" class="nav-link">ğŸ“Š Dashboard</a>
            <a href="ficha-completa.html" class="nav-link">ğŸ“‚ Ficha ClÃ­nica</a>
            <a href="exames-laboratoriais.html" class="nav-link home-btn">ğŸ§ª Exames</a>
            <a href="comorbidades.html" class="nav-link">ğŸ¥ Comorbidades</a>
            <a href="metodologia.html" class="nav-link">ğŸ“˜ Metodologia</a>
        </div>
    </div>
</div>

<div class="container">

<h1>Painel Laboratorial Estruturado</h1>

<section>
<h3>IdentificaÃ§Ã£o</h3>
<div class="grid">
<select id="sexo">
<option value="F">Feminino</option>
<option value="M">Masculino</option>
</select>
<input type="date" id="dataExame">
</div>
</section>

<h3>Hemograma Completo</h3>

<table class="tabela-exames">
<thead>
<tr>
<th>Exame</th>
<th>Resultado</th>
<th>Valor de ReferÃªncia</th>
<th>AlteraÃ§Ã£o</th>
</tr>
</thead>
<tbody id="corpoExames"></tbody>
</table>

<section style="margin-top:40px;">
<h3>ImportÃ¢ncia ClÃ­nica / Nutricional</h3>
<textarea id="interpretacao"
rows="5"
placeholder="Descreva a importÃ¢ncia clÃ­nica desses marcadores para a condiÃ§Ã£o do residente (ex: anemia ferropriva, DRC, inflamaÃ§Ã£o crÃ´nica, desnutriÃ§Ã£o proteico-calÃ³rica, risco cardiovascular...).">
</textarea>
</section>

<div style="margin-top:30px;">
<button class="btn-save" onclick="analisarExames()">ğŸ” Analisar AlteraÃ§Ãµes</button>
</div>

</div>

<script>
const exames = [
{nome:"Hemoglobina", refM:[13.5,17.5], refF:[12.0,15.5], unidade:"g/dL"},
{nome:"HematÃ³crito", refM:[41,53], refF:[36,46], unidade:"%"},
{nome:"LeucÃ³citos Totais", ref:[4000,11000], unidade:"/mmÂ³"},
{nome:"Plaquetas", ref:[150000,450000], unidade:"/mmÂ³"},
{nome:"Albumina", ref:[3.5,5.0], unidade:"g/dL"},
{nome:"Glicemia Jejum", ref:[70,99], unidade:"mg/dL"},
{nome:"Ureia", ref:[10,50], unidade:"mg/dL"},
{nome:"Creatinina (M)", refM:[0.7,1.3], unidade:"mg/dL"},
{nome:"Creatinina (F)", refF:[0.6,1.1], unidade:"mg/dL"},
{nome:"Colesterol Total", ref:[0,190], unidade:"mg/dL"},
{nome:"HDL", ref:[40,999], unidade:"mg/dL"},
{nome:"LDL", ref:[0,130], unidade:"mg/dL"},
{nome:"TriglicerÃ­deos", ref:[0,150], unidade:"mg/dL"},
{nome:"Vitamina D", ref:[20,999], unidade:"ng/mL"},
{nome:"Vitamina B12", ref:[200,900], unidade:"pg/mL"},
{nome:"Ferritina (M)", refM:[30,400], unidade:"ng/mL"},
{nome:"Ferritina (F)", refF:[13,150], unidade:"ng/mL"},
{nome:"SÃ³dio", ref:[135,145], unidade:"mEq/L"},
{nome:"PotÃ¡ssio", ref:[3.5,5.1], unidade:"mEq/L"},
{nome:"CÃ¡lcio", ref:[8.5,10.2], unidade:"mg/dL"},
{nome:"TSH", ref:[0.45,4.5], unidade:"mIU/L"}
];

const tbody = document.getElementById("corpoExames");

exames.forEach((ex,i)=>{
tbody.innerHTML += `
<tr>
<td>${ex.nome}</td>
<td><input type="number" step="any" id="res_${i}"></td>
<td>${ex.refM? (ex.refM[0]+" - "+ex.refM[1])+" (M) | "+(ex.refF[0]+" - "+ex.refF[1])+" (F)" : ex.ref[0]+" - "+ex.ref[1]} ${ex.unidade}</td>
<td id="alt_${i}">-</td>
</tr>`;
});

function analisarExames(){
const sexo = document.getElementById("sexo").value;

exames.forEach((ex,i)=>{
const valor = parseFloat(document.getElementById("res_"+i).value);
if(!valor) return;

let min,max;

if(ex.refM && sexo==="M"){ min=ex.refM[0]; max=ex.refM[1]; }
else if(ex.refF && sexo==="F"){ min=ex.refF[0]; max=ex.refF[1]; }
else if(ex.ref){ min=ex.ref[0]; max=ex.ref[1]; }

const cel = document.getElementById("alt_"+i);

if(valor<min || valor>max){
cel.innerText="Alterado";
cel.className="resultado-alterado";
}else{
cel.innerText="Normal";
cel.className="resultado-normal";
}
});
}
</script>

</body>
</html>
