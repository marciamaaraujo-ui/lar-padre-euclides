<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exames Laboratoriais - ILPI</title>
<link rel="stylesheet" href="style.css">

<style>
.tabela-exames {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 0.85rem;
}

.tabela-exames th,
.tabela-exames td {
    border: 1px solid #e0e0e0;
    padding: 8px;
    vertical-align: top;
}

.tabela-exames th {
    background: #f0f4f2;
    font-weight: bold;
}

.resultado-normal {
    background: #e8f8f5;
    color: #1e8449;
    font-weight: bold;
}

.resultado-alto {
    background: #fdecea;
    color: #c0392b;
    font-weight: bold;
}

.resultado-baixo {
    background: #fff4e6;
    color: #d35400;
    font-weight: bold;
}

textarea {
    width: 100%;
    margin-top: 25px;
    padding: 12px;
}
</style>
</head>

<body>

<div class="navbar">
<div class="nav-container">
<img src="assets/logo.png" class="nav-logo" alt="Logo ILPI">
<div class="nav-links">
<a href="index.html" class="nav-link">ğŸ  Nova AvaliaÃ§Ã£o</a>
<a href="dashboard.html" class="nav-link">ğŸ“Š Dashboard</a>
<a href="ficha-completa.html" class="nav-link">ğŸ“‚ Ficha ClÃ­nica</a>
<a href="exames-laboratoriais.html" class="nav-link home-btn">ğŸ§ª Exames</a>
<a href="comorbidades.html" class="nav-link">ğŸ¥ Comorbidades</a>
<a href="metodologia.html" class="nav-link">ğŸ“˜ Metodologia</a>
</div>
</div>
</div>

<div class="container">

<h1>Painel Laboratorial Institucional</h1>

<table class="tabela-exames">
<thead>
<tr>
<th>Marcador</th>
<th>Resultado</th>
<th>ReferÃªncia</th>
<th>AlteraÃ§Ã£o</th>
<th>InterpretaÃ§Ã£o ClÃ­nica</th>
</tr>
</thead>
<tbody id="corpoTabela"></tbody>
</table>

<h3>RelevÃ¢ncia ClÃ­nica e Nutricional AutomÃ¡tica</h3>
<textarea id="relatorioAutomatico" rows="6"
placeholder="O parecer clÃ­nico serÃ¡ gerado automaticamente conforme os resultados.">
</textarea>

</div>

<script>

const exames = [
{nome:"Hemoglobina", ref:[12,17.5], alto:"Policitemia ou desidrataÃ§Ã£o.", baixo:"Anemia ou perda de sangue."},
{nome:"VCM", ref:[80,100], alto:"Anemia macrocÃ­tica.", baixo:"Anemia microcÃ­tica."},
{nome:"RDW", ref:[11.5,14.5], alto:"Anisocitose.", baixo:"Sem significado isolado."},
{nome:"LeucÃ³citos", ref:[4000,11000], alto:"InfecÃ§Ã£o ou inflamaÃ§Ã£o.", baixo:"ImunossupressÃ£o."},
{nome:"NeutrÃ³filos", ref:[45,70], alto:"InfecÃ§Ã£o bacteriana.", baixo:"Risco infeccioso."},
{nome:"EosinÃ³filos", ref:[1,4], alto:"Alergias ou parasitoses.", baixo:"Estresse agudo."},
{nome:"Plaquetas", ref:[150000,450000], alto:"InflamaÃ§Ã£o ou reaÃ§Ã£o pÃ³s-esplenectomia.", baixo:"Risco hemorrÃ¡gico."},
{nome:"Glicemia Jejum", ref:[70,99], alto:"Hiperglicemia.", baixo:"Hipoglicemia."},
{nome:"HbA1c", ref:[0,5.7], alto:"Controle glicÃªmico inadequado.", baixo:"PossÃ­vel interferÃªncia hematolÃ³gica."},
{nome:"Albumina", ref:[3.5,5.0], alto:"DesidrataÃ§Ã£o.", baixo:"DesnutriÃ§Ã£o ou inflamaÃ§Ã£o."},
{nome:"PCR", ref:[0,0.3], alto:"InflamaÃ§Ã£o aguda.", baixo:"Normal."},
{nome:"Ureia", ref:[10,50], alto:"InsuficiÃªncia renal ou dieta hiperproteica.", baixo:"Dieta hipoproteica ou doenÃ§a hepÃ¡tica."},
{nome:"Creatinina", ref:[0.6,1.3], alto:"DisfunÃ§Ã£o renal.", baixo:"Baixa massa muscular (sarcopenia)."},
{nome:"Colesterol Total", ref:[0,190], alto:"Risco cardiovascular.", baixo:"MÃ¡ absorÃ§Ã£o ou hipertireoidismo."},
{nome:"HDL", ref:[40,999], alto:"Fator protetor cardiovascular.", baixo:"Risco cardiovascular aumentado."},
{nome:"LDL", ref:[0,130], alto:"Risco aterosclerÃ³tico.", baixo:"DesnutriÃ§Ã£o."},
{nome:"TriglicerÃ­deos", ref:[0,150], alto:"Risco pancreatite.", baixo:"MÃ¡ absorÃ§Ã£o."},
{nome:"Vitamina D", ref:[20,999], alto:"Toxicidade rara.", baixo:"DeficiÃªncia Ã³ssea."},
{nome:"Vitamina B12", ref:[200,900], alto:"SuplementaÃ§Ã£o excessiva.", baixo:"DeficiÃªncia comum."},
{nome:"Ferritina", ref:[13,400], alto:"ProteÃ­na de fase aguda (inflamaÃ§Ã£o).", baixo:"DeficiÃªncia de ferro."},
{nome:"Ferro SÃ©rico", ref:[60,170], alto:"Sobrecarga de ferro.", baixo:"Anemia ferropriva."},
{nome:"Zinco", ref:[70,120], alto:"SuplementaÃ§Ã£o excessiva.", baixo:"Baixa imunidade e cicatrizaÃ§Ã£o prejudicada."},
{nome:"PotÃ¡ssio", ref:[3.5,5.1], alto:"Risco cardÃ­aco.", baixo:"Uso de diurÃ©ticos ou perdas gastrointestinais."},
{nome:"CÃ¡lcio", ref:[8.5,10.2], alto:"Hiperparatireoidismo.", baixo:"DeficiÃªncia de vitamina D."},
{nome:"TGO/TGP", ref:[0,40], alto:"LesÃ£o hepÃ¡tica ou muscular.", baixo:"Sem significado clÃ­nico relevante."},
{nome:"TSH", ref:[0.45,4.5], alto:"Hipotireoidismo.", baixo:"Hipertireoidismo."}
];

const tbody = document.getElementById("corpoTabela");

exames.forEach((ex,i)=>{
tbody.innerHTML += `
<tr>
<td>${ex.nome}</td>
<td><input type="number" step="any" id="res_${i}" oninput="analisarLinha(${i})"></td>
<td>${ex.ref[0]} - ${ex.ref[1]}</td>
<td id="status_${i}">-</td>
<td id="interp_${i}">-</td>
</tr>`;
});

function analisarLinha(i){

const ex = exames[i];
const val = parseFloat(document.getElementById("res_"+i).value);
const status = document.getElementById("status_"+i);
const interp = document.getElementById("interp_"+i);

if(isNaN(val)){
status.innerText="-";
interp.innerText="-";
status.className="";
gerarRelatorioAutomatico();
return;
}

if(val > ex.ref[1]){
status.innerText="â†‘";
status.className="resultado-alto";
interp.innerText=ex.alto;
}
else if(val < ex.ref[0]){
status.innerText="â†“";
status.className="resultado-baixo";
interp.innerText=ex.baixo;
}
else{
status.innerText="Normal";
status.className="resultado-normal";
interp.innerText="Dentro da normalidade.";
}

gerarRelatorioAutomatico();
}

function gerarRelatorioAutomatico(){

let r = {};

exames.forEach((ex,i)=>{
let status = document.getElementById("status_"+i).innerText;
if(status==="â†‘" || status==="â†“"){
r[ex.nome] = status;
}
});

let texto = "";

/* ===== HEMATOLÃ“GICO ===== */

if(r["Hemoglobina"]==="â†“" && r["Ferro SÃ©rico"]==="â†“"){
texto += "Conjunto compatÃ­vel com anemia ferropriva.\n\n";
}

if(r["Hemoglobina"]==="â†“" && r["VCM"]==="â†“"){
texto += "Perfil sugestivo de anemia microcÃ­tica.\n\n";
}

if(r["Hemoglobina"]==="â†“" && r["VCM"]==="â†‘" && r["Vitamina B12"]==="â†“"){
texto += "Achados compatÃ­veis com anemia megaloblÃ¡stica por deficiÃªncia de B12.\n\n";
}

if(r["RDW"]==="â†‘" && r["VCM"]==="â†“"){
texto += "Anisocitose associada a deficiÃªncia inicial de ferro.\n\n";
}

if(r["Plaquetas"]==="â†‘" && r["PCR"]==="â†‘"){
texto += "Plaquetose reativa associada a inflamaÃ§Ã£o ativa.\n\n";
}

/* ===== INFLAMATÃ“RIO ===== */

if(r["PCR"]==="â†‘" && r["NeutrÃ³filos"]==="â†‘"){
texto += "Processo infeccioso bacteriano provÃ¡vel.\n\n";
}

if(r["PCR"]==="â†‘" && r["Albumina"]==="â†“"){
texto += "Resposta inflamatÃ³ria sistÃªmica com possÃ­vel estado catabÃ³lico.\n\n";
}

if(r["Ferritina"]==="â†‘" && r["PCR"]==="â†‘"){
texto += "ElevaÃ§Ã£o de proteÃ­na de fase aguda compatÃ­vel com inflamaÃ§Ã£o ativa.\n\n";
}

/* ===== RENAL ===== */

if(r["Ureia"]==="â†‘" && r["Creatinina"]==="â†‘"){
texto += "Perfil compatÃ­vel com comprometimento da funÃ§Ã£o renal.\n\n";
}

if(r["Ureia"]==="â†‘" && !r["Creatinina"]){
texto += "Ureia elevada possivelmente relacionada a ingestÃ£o proteica aumentada.\n\n";
}

if(r["Creatinina"]==="â†“"){
texto += "Creatinina reduzida sugere possÃ­vel sarcopenia.\n\n";
}

if(r["PotÃ¡ssio"]==="â†‘" && r["Creatinina"]==="â†‘"){
texto += "Risco cardÃ­aco associado Ã  disfunÃ§Ã£o renal.\n\n";
}

/* ===== METABÃ“LICO ===== */

if(r["Glicemia Jejum"]==="â†‘" && r["HbA1c"]==="â†‘"){
texto += "Descontrole glicÃªmico crÃ´nico compatÃ­vel com diabetes mal controlado.\n\n";
}

if(r["Glicemia Jejum"]==="â†“"){
texto += "Hipoglicemia detectada.\n\n";
}

/* ===== CARDIOVASCULAR ===== */

if(r["LDL"]==="â†‘" && r["HDL"]==="â†“"){
texto += "Alto risco aterosclerÃ³tico devido a perfil lipÃ­dico desfavorÃ¡vel.\n\n";
}

if(r["Colesterol Total"]==="â†‘" && r["TriglicerÃ­deos"]==="â†‘"){
texto += "Dislipidemia combinada com risco cardiovascular aumentado.\n\n";
}

/* ===== HEPÃTICO ===== */

if(r["TGO/TGP"]==="â†‘"){
texto += "Marcadores hepÃ¡ticos elevados sugerem lesÃ£o hepÃ¡tica.\n\n";
}

if(r["TGO/TGP"]==="â†‘" && r["TriglicerÃ­deos"]==="â†‘"){
texto += "PossÃ­vel esteatose hepÃ¡tica associada a dislipidemia.\n\n";
}

/* ===== MINERAL ===== */

if(r["CÃ¡lcio"]==="â†“" && r["Vitamina D"]==="â†“"){
texto += "Risco osteometabÃ³lico associado Ã  deficiÃªncia de vitamina D.\n\n";
}

if(r["CÃ¡lcio"]==="â†“"){
texto += "Hipocalcemia detectada.\n\n";
}

/* ===== IMUNOLÃ“GICO ===== */

if(r["Zinco"]==="â†“" && r["Albumina"]==="â†“"){
texto += "Imunidade potencialmente comprometida por deficiÃªncia nutricional.\n\n";
}

if(r["LeucÃ³citos"]==="â†“" && r["NeutrÃ³filos"]==="â†“"){
texto += "PossÃ­vel imunossupressÃ£o.\n\n";
}

/* ===== SE NADA CRUZAR ===== */

if(texto===""){
texto="AlteraÃ§Ãµes laboratoriais presentes, porÃ©m sem padrÃ£o cruzado relevante detectado.";
}

document.getElementById("relatorioAutomatico").value = texto;

}

</script>

</body>
</html>
